<nav class="navbar">
	<div class="container navbar-container">
		<a href="/<%=(typeof isAuthenticated !== 'undefined' && isAuthenticated) ? 'dashboard' : '' %>" class="navbar-logo gradient-parent">
			<img src="/img/management-logo.png" alt="Logo" class="logo-img" />
		</a>

		<button class="mobile-menu-toggle" aria-expanded="false" aria-label="Toggle navigation">
			<span class="toggle-bar"></span>
			<span class="toggle-bar"></span>
			<span class="toggle-bar"></span>
		</button>

		<ul class="nav-list">
			<li class="nav-item">
				<a href="<%= isAuthenticated ? '/dashboard' : '/'%>" class="nav-link"
					<%= (typeof activePage !== 'undefined' && activePage === 'home') ? 'active' : '' %>">
					<i class="fas fa-home"></i> Home
				</a>
			</li>
			<li class="nav-item">
				<a href="/contact" class="nav-link"
					<%= (typeof activePage !== 'undefined' && activePage === 'contact') ? 'active' : '' %>">
					<i class="fas fa-envelope"></i> Contact Us
				</a>
			</li>
			<% if (typeof isAuthenticated !== 'undefined' && isAuthenticated) { %>
			<!-- Navigation for authenticated users -->
<!-- 			<li class="nav-item">
				<a href="/dashboard" class="nav-link"
					<%= (typeof activePage !== 'undefined' && activePage === 'dashboard') ? 'active' : '' %>">
					<i class="fas fa-tachometer-alt"></i> Dashboard
				</a> -->
			</li>
			<li class="nav-item">
				<a href="/timesheet" class="nav-link"
					<%= (typeof activePage !== 'undefined' && activePage === 'timesheet') ? 'active' : '' %>">
					<i class="fas fa-clock"></i> TimeSheet
				</a>
			</li>
			<li class="nav-item ml-auto">
				<div class="user-dropdown">
					<button class="user-dropdown-btn">
						<div class="user-avatar">
							<% if (user.profile_image) { %>
								<img src="<%= user.profile_image %>" alt="User Avatar" class="user-avatar-img">
							<% } else { %>
								<i class="fas fa-user"></i>
							<% } %>
						</div>
						<span class="user-name">
							<%= locals.user ? user.username : 'User' %>
						</span>
						<i class="fas fa-chevron-down"></i>
					</button>
					<div class="user-dropdown-content">
						<a href="/account/profile">
							<i class="fas fa-id-card"></i> Profile
						</a>
						<% if (locals.user && user.roles.includes('manager')) { %>
						<a href="/manager">
							<i class="fas fa-cog"></i> Manager
						</a>
						<% } %>
                                <% if (locals.user && user.roles.includes('admin')) { %>
						<a href="/admin">
							<i class="fas fa-cog"></i> Admin
						</a>
						<% } %>
                                <a href="/account/logout">
							<i class="fas fa-sign-out-alt"></i> Logout
						</a>
					</div>
				</div>
			</li>
			<% } else { %>
                    <!-- Show login button for non-authenticated users -->
			<li class="nav-item login-nav-item">
				<a href="/account/login" class="btn btn-primary nav-link login-nav-link"
					<%= (typeof activePage !== 'undefined' && activePage === 'login') ? 'active' : '' %>">
					<i class="fas fa-sign-in-alt"></i> Login
				</a>
			</li>
			<% } %>
		</ul>

	</div>
</nav>